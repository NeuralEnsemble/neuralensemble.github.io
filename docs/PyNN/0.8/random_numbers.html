<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Random numbers &#8212; PyNN 0.8.3 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.8.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/pyNN_icon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Backends" href="backends.html" />
    <link rel="prev" title="Model parameters and initial values" href="parameters.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="backends.html" title="Backends"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="parameters.html" title="Model parameters and initial values"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyNN 0.8.3 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="random-numbers">
<h1>Random numbers<a class="headerlink" href="#random-numbers" title="Permalink to this headline">¶</a></h1>
<p>There are four considerations for random number generation and consumption in
PyNN:</p>
<blockquote>
<div><dl class="docutils">
<dt><strong>Reproducibility</strong>:</dt>
<dd>When comparing simulations with different backends, we may wish to
ensure that all backends use the same sequence of random numbers so that
the only differences between simulations arise from the numerics of the
simulators.</dd>
<dt><strong>Performance</strong>:</dt>
<dd>All simulators have their own built-in facilities for random number
generation, and it may be faster to use these than to use random numbers
generated by PyNN.</dd>
<dt><strong>Distributed simulations</strong>:</dt>
<dd>When distributing simulations across multiple processors using MPI, we
may wish to ensure that the sequence of random numbers is independent of
the number of computation nodes.</dd>
<dt><strong>Quality</strong>:</dt>
<dd>Different models have different requirements for the quality of the
(pseudo-)random number generator used. For models that are not strongly
dependent on this, we may wish to use a generator that is faster but has
lower-quality. For models that are highly sensitive, a slower but
higher-quality generator may be desired.</dd>
</dl>
</div></blockquote>
<p>Because of these considerations, PyNN aims to provide a great deal of
flexibility in specifying random number generation for those who need it, while
hiding the details entirely for those who do not.</p>
<div class="section" id="rng-classes">
<h2><code class="xref py py-class docutils literal"><span class="pre">RNG</span></code> classes<a class="headerlink" href="#rng-classes" title="Permalink to this headline">¶</a></h2>
<p>All functions and methods in the PyNN API that can make use of random numbers
have an optional <em>rng</em> argument, which should be an instance of a subclass of
<code class="xref py py-class docutils literal"><span class="pre">pyNN.random.AbstractRNG</span></code>.
PyNN provides three such sub-classes:</p>
<blockquote>
<div><dl class="docutils">
<dt><a class="reference internal" href="reference/random.html#pyNN.random.NumpyRNG" title="pyNN.random.NumpyRNG"><code class="xref py py-class docutils literal"><span class="pre">NumpyRNG</span></code></a>:</dt>
<dd>Uses the <code class="xref py py-class docutils literal"><span class="pre">numpy.random.RandomState</span></code> class (Mersenne Twister).</dd>
<dt><a class="reference internal" href="reference/random.html#pyNN.random.GSLRNG" title="pyNN.random.GSLRNG"><code class="xref py py-class docutils literal"><span class="pre">GSLRNG</span></code></a>:</dt>
<dd>Uses the <a class="reference external" href="http://pygsl.sourceforge.net/reference/pygsl/module-pygsl.rng.html">GNU Scientific Library random number generators</a>.</dd>
<dt><a class="reference internal" href="reference/random.html#pyNN.random.NativeRNG" title="pyNN.random.NativeRNG"><code class="xref py py-class docutils literal"><span class="pre">NativeRNG</span></code></a>:</dt>
<dd>Signals that the simulator&#8217;s own built-in RNG should be used.</dd>
</dl>
</div></blockquote>
<p>If you wish to use your own random number generator, it is reasonably
straightforward to do so: see <a class="reference internal" href="reference/random.html"><span class="doc">Random numbers</span></a> in the API reference.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the <em>rng</em> argument is not supplied (or is <cite>None</cite>), then the method
or function creates a new <a class="reference internal" href="reference/random.html#pyNN.random.NumpyRNG" title="pyNN.random.NumpyRNG"><code class="xref py py-class docutils literal"><span class="pre">NumpyRNG</span></code></a> for its own use.</p>
</div>
<p>All <code class="xref py py-class docutils literal"><span class="pre">RNG</span></code> classes accept a <em>seed</em> argument, and a <em>parallel_safe</em>
argument. The latter is <cite>True</cite> by default, and ensures that the simulation
results will <strong>not</strong> depend on the number of MPI nodes in a distributed
simulation. This independence can be computationally costly, however, so it is
possible to set <em>parallel_safe=False</em>, accepting that the results will be
dependent on the number of nodes, in order to get better performace.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>parallel_safe</em> may or may not have any effect when using
a <a class="reference internal" href="reference/random.html#pyNN.random.NativeRNG" title="pyNN.random.NativeRNG"><code class="xref py py-class docutils literal"><span class="pre">NativeRNG</span></code></a>, depending on the simulator.</p>
</div>
<div class="section" id="the-next-method">
<h3>The <code class="xref py py-meth docutils literal"><span class="pre">next()</span></code> method<a class="headerlink" href="#the-next-method" title="Permalink to this headline">¶</a></h3>
<p>Apart from the constructor, <code class="xref py py-class docutils literal"><span class="pre">RNG</span></code> classes have only one important method:
<code class="xref py py-meth docutils literal"><span class="pre">next()</span></code>, which returns a NumPy array containing random numbers from the
requested distribution:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rng</span> <span class="o">=</span> <span class="n">NumpyRNG</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">824756</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rng</span><span class="o">.</span><span class="n">next</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;normal&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;mu&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;sigma&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">})</span>
<span class="go">array([ 0.65866423,  0.87500017,  0.90755753,  0.93793779,  0.94839735])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rng</span> <span class="o">=</span> <span class="n">GSLRNG</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">824756</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;ranlxd2&#39;</span><span class="p">)</span>  <span class="c1"># RANLUX algorithm of Luescher</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rng</span><span class="o">.</span><span class="n">next</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;normal&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;mu&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;sigma&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">})</span>
<span class="go">array([ 0.61104097,  0.83086026,  0.87072741,  0.7513628 ,  1.12875371])</span>
</pre></div>
</div>
<p>In versions of PyNN prior to 0.8, distribution names and parameterisations were
not standardized: e.g. <code class="xref py py-class docutils literal"><span class="pre">GSLRNG</span></code> needed &#8216;gaussian&#8217; rather than &#8216;normal&#8217;.
As of PyNN 0.8, the following standardized names are used:</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="22%" />
<col width="51%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Name</td>
<td>Parameters</td>
<td>Comments</td>
</tr>
<tr class="row-even"><td>binomial</td>
<td>n, p</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>gamma</td>
<td>k, theta</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>exponential</td>
<td>beta</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>lognormal</td>
<td>mu, sigma</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>normal</td>
<td>mu, sigma</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>normal_clipped</td>
<td>mu, sigma, low, high</td>
<td>Values outside (low, high) are redrawn</td>
</tr>
<tr class="row-even"><td>normal_clipped_to_boundary</td>
<td>mu, sigma, low, high</td>
<td>Values below/above low/high are set to low/high</td>
</tr>
<tr class="row-odd"><td>poisson</td>
<td>lambda</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>uniform</td>
<td>low, high</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>uniform_int</td>
<td>low, high</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>vonmises</td>
<td>mu, kappa</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="the-randomdistribution-class">
<h2>The <a class="reference internal" href="reference/random.html#pyNN.random.RandomDistribution" title="pyNN.random.RandomDistribution"><code class="xref py py-class docutils literal"><span class="pre">RandomDistribution</span></code></a> class<a class="headerlink" href="#the-randomdistribution-class" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="reference/random.html#pyNN.random.RandomDistribution" title="pyNN.random.RandomDistribution"><code class="xref py py-class docutils literal"><span class="pre">RandomDistribution</span></code></a> class encapsulates a choice of
random number generator and a choice of distribution, so that its <code class="xref py py-meth docutils literal"><span class="pre">next()</span></code>
method requires only the number of values required as argument:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gamma</span> <span class="o">=</span> <span class="n">RandomDistribution</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="n">rng</span><span class="o">=</span><span class="n">NumpyRNG</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">72386</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gamma</span><span class="o">.</span><span class="n">next</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">array([ 0.4325809 ,  0.12952503,  1.58510406,  0.81182457,  0.07577787])</span>
</pre></div>
</div>
<p>You can alternatively provide parameter names as keyword arguments, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gamma</span> <span class="o">=</span> <span class="n">RandomDistribution</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">rng</span><span class="o">=</span><span class="n">NumpyRNG</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">72386</span><span class="p">))</span>
</pre></div>
</div>
<p>Note that <a class="reference internal" href="reference/random.html#pyNN.random.RandomDistribution.next" title="pyNN.random.RandomDistribution.next"><code class="xref py py-meth docutils literal"><span class="pre">next()</span></code></a> called without any
arguments returns a single number, not an array:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gamma</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">0.52020946027308368</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gamma</span><span class="o">.</span><span class="n">next</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([ 0.4863944])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the apparent difference in precision between the single number and
the array is not real: NumPy only <em>displays</em> a limited number of
digits but the numbers in the array have full precision.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/pyNN_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Random numbers</a><ul>
<li><a class="reference internal" href="#rng-classes"><code class="docutils literal"><span class="pre">RNG</span></code> classes</a><ul>
<li><a class="reference internal" href="#the-next-method">The <code class="docutils literal"><span class="pre">next()</span></code> method</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-randomdistribution-class">The <code class="docutils literal"><span class="pre">RandomDistribution</span></code> class</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="parameters.html"
                        title="previous chapter">Model parameters and initial values</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="backends.html"
                        title="next chapter">Backends</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/random_numbers.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="backends.html" title="Backends"
             >next</a> |</li>
        <li class="right" >
          <a href="parameters.html" title="Model parameters and initial values"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyNN 0.8.3 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2006-2017, the PyNN community.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.3.
    </div>
  </body>
</html>