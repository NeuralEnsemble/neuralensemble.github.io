<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Running simulations with PyNN &#8212; PyNN 0.7 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.7',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/pyNN_icon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Standardised neuron models" href="standardmodels.html" />
    <link rel="prev" title="Download and Install" href="installation.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="standardmodels.html" title="Standardised neuron models"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Download and Install"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyNN 0.7 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="running-simulations-with-pynn">
<h1>Running simulations with PyNN<a class="headerlink" href="#running-simulations-with-pynn" title="Permalink to this headline">¶</a></h1>
<div class="section" id="importing-pynn">
<h2>Importing PyNN<a class="headerlink" href="#importing-pynn" title="Permalink to this headline">¶</a></h2>
<p>The simulator used by a PyNN script is determined by which module is imported from the PyNN package, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyNN.neuron</span> <span class="k">import</span> <span class="o">*</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyNN.nest</span> <span class="k">import</span> <span class="o">*</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyNN.pcsim</span> <span class="k">import</span> <span class="o">*</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyNN.brian</span> <span class="k">import</span> <span class="o">*</span>  
</pre></div>
</div>
<p>After this line, all PyNN code is independent of the simulator used, although it is possible to include
simulator-specific code in the script as well (if simulator-independence is not important to you, or
if you are in the process of porting simulator-specific code to pure PyNN code).</p>
</div>
<div class="section" id="initialising-the-simulator">
<h2>Initialising the simulator<a class="headerlink" href="#initialising-the-simulator" title="Permalink to this headline">¶</a></h2>
<p>Before using any other functions or classes from PyNN, the user must call the <code class="docutils literal"><span class="pre">setup()</span></code> function:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">setup</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">setup()</span></code> takes various optional arguments: setting the simulation timestep (there is currently no support in the API for variable timestep methods although native simulator code can be used to select this option where the simulator supports it) and setting the minimum and maximum synaptic delays, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">setup</span><span class="p">(</span><span class="n">timestep</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">min_delay</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">max_delay</span><span class="o">=</span><span class="mf">10.0</span><span class="p">)</span>
</pre></div>
</div>
<p>In previous versions, <code class="docutils literal"><span class="pre">setup()</span></code> took a <code class="docutils literal"><span class="pre">debug</span></code> argument for configuring logging. To allow more flexibility, configuration of logging must now be done separately. There is a convenience function in the <code class="docutils literal"><span class="pre">pyNN.utility</span></code> module to simplify this:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyNN.utility</span> <span class="k">import</span> <span class="n">init_logging</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">init_logging</span><span class="p">(</span><span class="s">&quot;logfile&quot;</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>
</pre></div>
</div>
<p>or you can configure the Python <code class="docutils literal"><span class="pre">logging</span></code> module directly.</p>
</div>
<div class="section" id="creating-neurons">
<h2>Creating neurons<a class="headerlink" href="#creating-neurons" title="Permalink to this headline">¶</a></h2>
<p>Neurons are created using the <code class="docutils literal"><span class="pre">Population</span></code> class, which represents a group of neurons all of the same type (i.e. the same model, although different parameterisations of the same model can be used to model different biological neuron types), e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span> <span class="o">=</span> <span class="n">Population</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">IF_curr_alpha</span><span class="p">,</span> <span class="n">structure</span><span class="o">=</span><span class="n">space</span><span class="o">.</span><span class="n">Grid2D</span><span class="p">())</span>
</pre></div>
</div>
<p>This creates 100 integrate-and-fire neurons with default parameters, distributed on a square grid.
<code class="docutils literal"><span class="pre">IF_curr_alpha</span></code> is a particular class of IF neuron with alpha-function shaped synaptic currents, that will work with any PyNN simulation engine, whether NEURON, NEST, PCSIM or Brian. <code class="docutils literal"><span class="pre">IF_curr_alpha</span></code> is a so-called &#8216;standard cell&#8217;, implemented as a Python class.
For more information, see the section StandardCells.</p>
<p>Since we didn&#8217;t specify any parameters for the neuron model, the neurons we created above have default parameter values, stored in the <code class="docutils literal"><span class="pre">default_values</span></code> of the standard cell class, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">IF_curr_alpha</span><span class="o">.</span><span class="n">default_parameters</span> 
<span class="go">{&#39;tau_refrac&#39;: 0.10000000000000001, &#39;v_thresh&#39;: -50.0, &#39;tau_m&#39;: 20.0,</span>
<span class="go"> &#39;tau_syn_E&#39;: 0.5, &#39;v_rest&#39;: -65.0, &#39;cm&#39;: 1.0, &#39;v_reset&#39;: -65.0,</span>
<span class="go"> &#39;tau_syn_I&#39;: 0.5, &#39;i_offset&#39;: 0.0}</span>
</pre></div>
</div>
<p>To use different parameter values, use the <code class="docutils literal"><span class="pre">cellparams</span></code> argument, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p2</span> <span class="o">=</span> <span class="n">Population</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">IF_curr_alpha</span><span class="p">,</span> <span class="n">cellparams</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;tau_m&#39;</span><span class="p">:</span> <span class="mf">15.0</span><span class="p">,</span> <span class="s">&#39;cm&#39;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">})</span>
</pre></div>
</div>
<p>If you try to set a non-existent parameter, or pass an invalid value, PyNN will raise an Exception, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p2a</span> <span class="o">=</span> <span class="n">Population</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">IF_curr_alpha</span><span class="p">,</span> <span class="n">cellparams</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="mf">15.0</span><span class="p">})</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="n">File</span> <span class="s">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/neuron/__init__.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">113</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="n">common</span><span class="o">.</span><span class="n">Population</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">cellclass</span><span class="p">,</span> <span class="n">cellparams</span><span class="p">,</span> <span class="n">structure</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/common.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">879</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">celltype</span> <span class="o">=</span> <span class="n">cellclass</span><span class="p">(</span><span class="n">cellparams</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/neuron/standardmodels/cells.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">35</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="n">cells</span><span class="o">.</span><span class="n">IF_curr_alpha</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span> <span class="c"># checks supplied parameters and adds default</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/standardmodels/__init__.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">60</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="n">models</span><span class="o">.</span><span class="n">BaseModelType</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/models.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">16</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">checkParameters</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">with_defaults</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/models.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">67</span><span class="p">,</span> <span class="ow">in</span> <span class="n">checkParameters</span>
      <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">NonExistentParameterError</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">cls</span><span class="o">.</span><span class="n">default_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="gr">NonExistentParameterError</span>: <span class="n">foo (valid parameters for &lt;class &#39;pyNN.neuron.standardmodels.cells.IF_curr_alpha&#39;&gt; are: cm, i_offset, tau_m, tau_refrac, tau_syn_E, tau_syn_I, v_reset, v_rest, v_thresh)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">p2b</span> <span class="o">=</span> <span class="n">Population</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">IF_curr_alpha</span><span class="p">,</span> <span class="n">cellparams</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;tau_m&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">})</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="n">File</span> <span class="s">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/neuron/__init__.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">113</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="n">common</span><span class="o">.</span><span class="n">Population</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">cellclass</span><span class="p">,</span> <span class="n">cellparams</span><span class="p">,</span> <span class="n">structure</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/common.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">879</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">celltype</span> <span class="o">=</span> <span class="n">cellclass</span><span class="p">(</span><span class="n">cellparams</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/neuron/standardmodels/cells.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">35</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="n">cells</span><span class="o">.</span><span class="n">IF_curr_alpha</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span> <span class="c"># checks supplied parameters and adds default</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/standardmodels/__init__.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">60</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="n">models</span><span class="o">.</span><span class="n">BaseModelType</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/models.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">16</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">checkParameters</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">with_defaults</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/models.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">57</span><span class="p">,</span> <span class="ow">in</span> <span class="n">checkParameters</span>
      <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">InvalidParameterValueError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
<span class="gr">InvalidParameterValueError</span>: <span class="n">For tau_m in IF_curr_alpha, expected &lt;type &#39;float&#39;&gt;, got &lt;type &#39;str&#39;&gt; (bar)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="n">File</span> <span class="s">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/neuron/__init__.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">113</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="n">common</span><span class="o">.</span><span class="n">Population</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">cellclass</span><span class="p">,</span> <span class="n">cellparams</span><span class="p">,</span> <span class="n">structure</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/common.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">879</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">celltype</span> <span class="o">=</span> <span class="n">cellclass</span><span class="p">(</span><span class="n">cellparams</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/neuron/standardmodels/cells.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">35</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="n">cells</span><span class="o">.</span><span class="n">IF_curr_alpha</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span> <span class="c"># checks supplied parameters and adds default</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/standardmodels/__init__.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">60</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="n">models</span><span class="o">.</span><span class="n">BaseModelType</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/models.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">16</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__init__</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">checkParameters</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">with_defaults</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/home/andrew/dev/pyNN/models.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">57</span><span class="p">,</span> <span class="ow">in</span> <span class="n">checkParameters</span>
      <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">InvalidParameterValueError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
<span class="gr">InvalidParameterValueError</span>: <span class="n">For tau_m in IF_curr_alpha, expected &lt;type &#39;float&#39;&gt;, got &lt;type &#39;str&#39;&gt; (bar)</span>
</pre></div>
</div>
<p>You can also give your population a label:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p3</span> <span class="o">=</span> <span class="n">Population</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">SpikeSourceArray</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&quot;Input Population&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This illustrates all the possible arguments of the <code class="docutils literal"><span class="pre">Population</span></code> constructor, with argument names.
It creates a 3x4x5 array of <code class="docutils literal"><span class="pre">IF_cond_alpha</span></code> neurons, all with a spike threshold set to -55 mV and membrane time constant set to 10 ms:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p4</span> <span class="o">=</span> <span class="n">Population</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">cellclass</span><span class="o">=</span><span class="n">IF_cond_alpha</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">cellparams</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;v_thresh&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">55.0</span><span class="p">,</span> <span class="s">&#39;tau_m&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span> <span class="s">&#39;tau_refrac&#39;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">},</span>
<span class="gp">... </span>                <span class="n">structure</span><span class="o">=</span><span class="n">space</span><span class="o">.</span><span class="n">Grid3D</span><span class="p">(</span><span class="mf">3.</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="mf">3.</span><span class="o">/</span><span class="mi">5</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s">&quot;Column 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Since creating neurons on a grid is very common, the grid dimensions can be specified in place of the size, without having to create a structure object, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p4a</span> <span class="o">=</span> <span class="n">Population</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">IF_cond_alpha</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">p4</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="n">p4a</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">60</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">p4</span><span class="o">.</span><span class="n">structure</span> <span class="o">==</span> <span class="n">p4a</span><span class="o">.</span><span class="n">structure</span><span class="p">,</span> <span class="s">&quot;%s != %s&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">p4</span><span class="o">.</span><span class="n">structure</span><span class="p">,</span> <span class="n">p4a</span><span class="o">.</span><span class="n">structure</span><span class="p">)</span>
</pre></div>
</div>
<p>The above examples all use PyNN standard cell models. It is also possible to use simulator-specific models by defining a <cite>NativeCellClass</cite>, e.g. for NEST:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p5</span> <span class="o">=</span> <span class="n">Population</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">native_cell_type</span><span class="p">(</span><span class="s">&#39;iaf_neuron&#39;</span><span class="p">),</span> <span class="n">cellparams</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;tau_m&#39;</span><span class="p">:</span> <span class="mf">15.0</span><span class="p">,</span> <span class="s">&#39;C_m&#39;</span><span class="p">:</span> <span class="mf">0.001</span><span class="p">})</span> 
</pre></div>
</div>
<p>This example will work with NEST but not with NEURON, PCSIM or Brian.</p>
</div>
<div class="section" id="setting-parameter-values">
<h2>Setting parameter values<a class="headerlink" href="#setting-parameter-values" title="Permalink to this headline">¶</a></h2>
<p>As well as specifying the parameter values for the neuron models when you create a
<code class="docutils literal"><span class="pre">Population</span></code>, you can also set or change the values for an existing <code class="docutils literal"><span class="pre">Population</span></code>.</p>
<div class="section" id="setting-the-same-value-for-the-entire-population">
<h3>Setting the same value for the entire population<a class="headerlink" href="#setting-the-same-value-for-the-entire-population" title="Permalink to this headline">¶</a></h3>
<p>To set a parameter for all neurons in the population to the same value, use the <code class="docutils literal"><span class="pre">set()</span></code> method, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;tau_m&quot;</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s">&#39;tau_m&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span> <span class="s">&#39;v_rest&#39;</span><span class="p">:</span><span class="o">-</span><span class="mi">65</span><span class="p">})</span>
</pre></div>
</div>
<p>The first form can be used for setting a single parameter, the second form for setting multiple parameters at once.</p>
</div>
<div class="section" id="setting-the-parameters-of-individual-neurons">
<h3>Setting the parameters of individual neurons<a class="headerlink" href="#setting-the-parameters-of-individual-neurons" title="Permalink to this headline">¶</a></h3>
<p>To address individual neurons in a population, use <code class="docutils literal"><span class="pre">[]</span></code> notation, e.g.,:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="p">[</span><span class="mi">99</span><span class="p">]</span>
<span class="go">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p2</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span>
<span class="go">118</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p3</span><span class="p">[</span><span class="mi">44</span><span class="p">]</span>
<span class="go">246</span>
</pre></div>
</div>
<p>The return values are <code class="docutils literal"><span class="pre">ID</span></code> objects, which behave in most cases as integers, but also
allow accessing the values of the cell parameters.
The value within the square brackets is referred to as a neuron&#8217;s <em>index</em>, which always runs from 0 to <code class="docutils literal"><span class="pre">size</span></code>-1 for a given population, while the return value is its <em>id</em>.
Trying to address a non-existent neuron will raise an Exception:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="p">[</span><span class="mi">999</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;/home/andrew/dev/pyNN/common.py&quot;</span>, line <span class="m">394</span>, in <span class="n">__getitem__</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_cells</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
<span class="gr">IndexError</span>: <span class="n">index out of bounds</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;/home/andrew/dev/pyNN/common.py&quot;</span>, line <span class="m">394</span>, in <span class="n">__getitem__</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_cells</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
<span class="gr">IndexError</span>: <span class="n">index out of bounds</span>
</pre></div>
</div>
<p>To obtain an index given the id, use <code class="docutils literal"><span class="pre">id_to_index()</span></code>, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p3</span><span class="p">[</span><span class="mi">49</span><span class="p">]</span>
<span class="go">170</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p3</span><span class="o">.</span><span class="n">id_to_index</span><span class="p">(</span><span class="mi">170</span><span class="p">)</span>
<span class="go">49</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">ID</span></code> object allows direct access to the parameters of individual neurons, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p4</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tau_m</span>
<span class="go">10.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p4</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tau_m</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p4</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tau_m</span>
<span class="go">15.0</span>
</pre></div>
</div>
<p>To change several parameters at once for a single neuron, use the <code class="docutils literal"><span class="pre">set_parameters()</span></code> method of the neuron ID, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p4</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">(</span><span class="n">tau_m</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">cm</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p4</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">tau_m</span>
<span class="go">10.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p4</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">cm</span>
<span class="go">0.5</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-the-parameters-of-a-subset-of-neurons">
<h3>Setting the parameters of a subset of neurons<a class="headerlink" href="#setting-the-parameters-of-a-subset-of-neurons" title="Permalink to this headline">¶</a></h3>
<p>To access several neurons at once, use slice notation, e.g., to access the first five neurons in a population, use:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p2</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
<p>A <code class="docutils literal"><span class="pre">PopulationView</span></code> holds references to a subset of neurons in a <code class="docutils literal"><span class="pre">Population</span></code>, which means that any changes in the view are also reflected in the real population (and vice versa), e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">view</span> <span class="o">=</span> <span class="n">p2</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">view</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;tau_m&#39;</span><span class="p">,</span> <span class="mf">11.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;tau_m&#39;</span><span class="p">)</span>
<span class="go">[11.0, 11.0, 11.0, 11.0, 11.0, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0]</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">PopulationView</span></code> objects behave in most ways as real <code class="docutils literal"><span class="pre">Population</span></code> objects, notably, they
can be used in a <code class="docutils literal"><span class="pre">Projection</span></code> (see below) and combined with other <code class="docutils literal"><span class="pre">Population</span></code>
or <code class="docutils literal"><span class="pre">PopulationView</span></code> objects to create an <code class="docutils literal"><span class="pre">Assembly</span></code>.</p>
</div>
<div class="section" id="setting-random-values">
<h3>Setting random values<a class="headerlink" href="#setting-random-values" title="Permalink to this headline">¶</a></h3>
<p>To set a parameter to values drawn from a random distribution, use the <code class="docutils literal"><span class="pre">rset()</span></code> method with a <code class="docutils literal"><span class="pre">RandomDistribution</span></code> object from the <code class="docutils literal"><span class="pre">pyNN.random</span></code> module (see the chapter on random numbers for more details).
The following example sets the threshold potential of each neuron to a value drawn from a uniform distribution between -55 mV and -50 mV:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyNN.random</span> <span class="k">import</span> <span class="n">RandomDistribution</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vthresh_distr</span> <span class="o">=</span> <span class="n">RandomDistribution</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s">&#39;uniform&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">55</span><span class="p">,</span><span class="o">-</span><span class="mi">50</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">rset</span><span class="p">(</span><span class="s">&#39;v_thresh&#39;</span><span class="p">,</span> <span class="n">vthresh_distr</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that positional arguments can also be used. The following produces the same result as the above:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">vthresh_distr</span> <span class="o">=</span> <span class="n">RandomDistribution</span><span class="p">(</span><span class="s">&#39;uniform&#39;</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mi">55</span><span class="p">,</span><span class="o">-</span><span class="mi">50</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-values-according-to-an-array">
<h3>Setting values according to an array<a class="headerlink" href="#setting-values-according-to-an-array" title="Permalink to this headline">¶</a></h3>
<p>The most efficient way to set different (but non-random) values for different neurons is to use the <code class="docutils literal"><span class="pre">tset()</span></code> (for <em>topographic</em> set) method.
The following example injects a current of 0.1 nA into the first 20 neurons in the population:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">current_input</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">current_input</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">tset</span><span class="p">(</span><span class="s">&#39;i_offset&#39;</span><span class="p">,</span> <span class="n">current_input</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="setting-initial-values">
<h2>Setting initial values<a class="headerlink" href="#setting-initial-values" title="Permalink to this headline">¶</a></h2>
<p>To set the initial values of state variable such as the membrane potential use
the <code class="docutils literal"><span class="pre">initialize()</span></code> method:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="s">&#39;v&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mf">65.0</span><span class="p">)</span>
</pre></div>
</div>
<p>To initialize different neurons to different random values, pass a
<code class="docutils literal"><span class="pre">RandomDistribution</span></code> object instead of a float:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">vinit_distr</span> <span class="o">=</span> <span class="n">RandomDistribution</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s">&#39;uniform&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">70</span><span class="p">,</span><span class="o">-</span><span class="mi">60</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="s">&#39;v&#39;</span><span class="p">,</span> <span class="n">vinit_distr</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="iterating-over-all-the-neurons-in-a-population">
<h2>Iterating over all the neurons in a population<a class="headerlink" href="#iterating-over-all-the-neurons-in-a-population" title="Permalink to this headline">¶</a></h2>
<p>To iterate over all the cells in a population, returning the neuron ids, use:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">p2</span><span class="p">:</span> 
<span class="gp">... </span>  <span class="nb">print</span> <span class="nb">id</span><span class="p">,</span> <span class="nb">id</span><span class="o">.</span><span class="n">tau_m</span>
<span class="gp">...</span>
<span class="go">100 11.0</span>
<span class="go">101 11.0</span>
<span class="go">102 11.0</span>
<span class="go">103 11.0</span>
<span class="go">104 11.0</span>
<span class="go">105 15.0</span>
<span class="go">106 15.0</span>
<span class="gp">...</span>
</pre></div>
</div>
</div>
<div class="section" id="injecting-current">
<h2>Injecting current<a class="headerlink" href="#injecting-current" title="Permalink to this headline">¶</a></h2>
<p>Static or time-varying currents may be injected into the
cells of a Population using either the <code class="docutils literal"><span class="pre">inject_into()</span></code> method of the <code class="docutils literal"><span class="pre">CurrentSource</span></code> or the <code class="docutils literal"><span class="pre">inject()</span></code> method of the <code class="docutils literal"><span class="pre">Population</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pulse</span> <span class="o">=</span> <span class="n">DCSource</span><span class="p">(</span><span class="n">amplitude</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mf">80.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pulse</span><span class="o">.</span><span class="n">inject_into</span><span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">7</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p4</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="n">pulse</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">times</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amplitudes</span> <span class="o">=</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">numpy</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">times</span><span class="o">*</span><span class="n">numpy</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">100.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sine_wave</span> <span class="o">=</span> <span class="n">StepCurrentSource</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">amplitudes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="p">[(</span><span class="mi">6</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">27</span><span class="p">)]</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="n">sine_wave</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sine_wave</span><span class="o">.</span><span class="n">inject_into</span><span class="p">(</span><span class="n">p5</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">sine_wave</span><span class="o">.</span><span class="n">inject_into</span><span class="p">(</span><span class="n">p3</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="n">File</span> <span class="s">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
      <span class="n">sine_wave</span><span class="o">.</span><span class="n">inject_into</span><span class="p">(</span><span class="n">p3</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/usr/lib/python/site-packages/pyNN/neuron/electrodes.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">67</span><span class="p">,</span> <span class="ow">in</span> <span class="n">inject_into</span>
      <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;Can&#39;t inject current into a spike source.&quot;</span><span class="p">)</span>
<span class="gr">TypeError</span>: <span class="n">Can&#39;t inject current into a spike source.</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="n">File</span> <span class="s">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
      <span class="n">sine_wave</span><span class="o">.</span><span class="n">inject_into</span><span class="p">(</span><span class="n">p3</span><span class="p">)</span>
    <span class="n">File</span> <span class="s">&quot;/usr/lib/python/site-packages/pyNN/neuron/electrodes.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">67</span><span class="p">,</span> <span class="ow">in</span> <span class="n">inject_into</span>
      <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;Can&#39;t inject current into a spike source.&quot;</span><span class="p">)</span>
<span class="gr">TypeError</span>: <span class="n">Can&#39;t inject current into a spike source.</span>
</pre></div>
</div>
</div>
<div class="section" id="recording">
<h2>Recording<a class="headerlink" href="#recording" title="Permalink to this headline">¶</a></h2>
<p>Recording spike times is done with the method <code class="docutils literal"><span class="pre">record()</span></code>.
Recording membrane potential is done with the method <code class="docutils literal"><span class="pre">record_v()</span></code>.
Recording synaptic conductances is done with the method <code class="docutils literal"><span class="pre">record_gsyn()</span></code>.
All three methods have identical argument lists.
Some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">record</span><span class="p">()</span>                <span class="c"># record from all neurons in the population</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">record</span><span class="p">()</span>     <span class="c"># record from 10 neurons chosen at random</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">record</span><span class="p">()</span>       <span class="c"># record from specific neurons</span>
</pre></div>
</div>
</div>
<div class="section" id="running-a-simulation">
<h2>Running a simulation<a class="headerlink" href="#running-a-simulation" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">run()</span></code> function runs the simulation for a given number of milliseconds, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">run</span><span class="p">(</span><span class="mf">1000.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="accessing-recorded-data-and-writing-to-file">
<h2>Accessing recorded data and writing to file<a class="headerlink" href="#accessing-recorded-data-and-writing-to-file" title="Permalink to this headline">¶</a></h2>
<p>Writing recorded values to file is done with a second triple of methods, <code class="docutils literal"><span class="pre">printSpikes()</span></code>, <code class="docutils literal"><span class="pre">print_v()</span></code> and <code class="docutils literal"><span class="pre">print_gsyn()</span></code>, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">printSpikes</span><span class="p">(</span><span class="s">&quot;spikefile.dat&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, the output files are post-processed to reformat them from the native simulator format to a common format that is the same for all simulator engines.</p>
<p>The beginning of a typical spike file looks like:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c"># dt = 0.1</span>
<span class="c"># n = 1000</span>
<span class="mf">0.0</span>     <span class="mi">2</span>
<span class="mf">0.3</span>     <span class="mi">5</span>
<span class="mf">0.4</span>     <span class="mi">3</span>
<span class="mf">0.9</span>     <span class="mi">2</span>
<span class="mf">1.0</span>     <span class="mi">1</span>
<span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
</pre></div>
</div>
<p>The beginning of a typical membrane potential file looks like:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c"># dt = 0.1</span>
<span class="c"># n = 1000</span>
<span class="o">-</span><span class="mf">65.0</span>   <span class="mi">0</span>
<span class="o">-</span><span class="mf">64.9</span>   <span class="mi">0</span>
<span class="o">-</span><span class="mf">64.7</span>   <span class="mi">0</span>
<span class="o">-</span><span class="mf">64.5</span>   <span class="mi">0</span>
<span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
</pre></div>
</div>
<p>Both file types begin with header lines giving the timestep (there is currently no support for variable-time step recording) and the number of data points in the file.
Each line of the spike file then gives the occurence time of a spike (in ms) and the id of the neuron in which it was recorded.
Each line of the membrane potential file gives the membrane potential (in mV) followed by the id of the neuron in which it was recorded.
In both cases, whether the file is sorted by cell id or by time depends on the simulator: it is not standardised.</p>
<p>Having a standard format facilitates comparisons across simulators, but of course has some performace penalty.
To get output in the native format of the simulator, add <code class="docutils literal"><span class="pre">compatible_output=False</span></code> to the argument list.</p>
<p>When running a distributed simulation, each node records only those neurons that it simulates.
By default, at the end of the simulation all nodes send their recorded data to the master node so that all values are written to a single output file.
Again, there is a performance penalty for this, so if you wish each node to write its own file, add <code class="docutils literal"><span class="pre">gather=False</span></code> to the argument list.</p>
<p>It is possible to save data in various different formats. The default (if you pass a filename) is a text file, but you can also save in various binary formats. To save in HDF5 format (this requires the PyTables package to be installed), for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyNN.recording.files</span> <span class="k">import</span> <span class="n">HDF5ArrayFile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h5file</span> <span class="o">=</span> <span class="n">HDF5ArrayFile</span><span class="p">(</span><span class="s">&quot;spikefile.h5&quot;</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">printSpikes</span><span class="p">(</span><span class="n">h5file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h5file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>If you wish to obtain the recorded data within the simulation script, for plotting or further analysis, there is a further triple of methods, <code class="docutils literal"><span class="pre">getSpikes()</span></code>, <code class="docutils literal"><span class="pre">get_v()</span></code> and <code class="docutils literal"><span class="pre">get_gsyn()</span></code>. Again, there is a <code class="docutils literal"><span class="pre">gather</span></code> option for distributed simulations.</p>
<div class="section" id="statistics-of-recorded-data">
<h3>Statistics of recorded data<a class="headerlink" href="#statistics-of-recorded-data" title="Permalink to this headline">¶</a></h3>
<p>Often, the exact spike times and exact membrane potential traces are not required, only statistical measures.
PyNN currently only provides one such measure, the mean number of spikes per neuron, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">meanSpikeCount</span><span class="p">()</span>
<span class="go">0.01</span>
</pre></div>
</div>
<p>More such statistical measures are planned for future releases.
# mention p1.get_spike_counts()</p>
</div>
</div>
<div class="section" id="repeating-a-simulation">
<h2>Repeating a simulation<a class="headerlink" href="#repeating-a-simulation" title="Permalink to this headline">¶</a></h2>
<p>If you wish to reset network time to zero to run a new simulation with the same
network (with different parameter values, perhaps), use the <code class="docutils literal"><span class="pre">reset()</span></code> function.
Note that this does not change the network structure, nor the choice of which
neurons to record (from previous <code class="docutils literal"><span class="pre">record()</span></code> calls).</p>
</div>
<div class="section" id="position-in-space">
<h2>Position in space<a class="headerlink" href="#position-in-space" title="Permalink to this headline">¶</a></h2>
<p>The positions of neurons in space are usually determined by passing
in a <code class="docutils literal"><span class="pre">Structure</span></code> object when creating a <code class="docutils literal"><span class="pre">Population</span></code> (see above). Some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s1</span> <span class="o">=</span> <span class="n">space</span><span class="o">.</span><span class="n">Line</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s1</span><span class="o">.</span><span class="n">generate_positions</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go"> array([[ 0.,  1.,  2.],</span>
<span class="go">        [ 0.,  0.,  0.],</span>
<span class="go">        [ 0.,  0.,  0.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="n">space</span><span class="o">.</span><span class="n">Grid2D</span><span class="p">(</span><span class="n">aspect_ratio</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="mf">7.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span><span class="o">.</span><span class="n">generate_positions</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="go">array([[ 0.,  0.,  3.,  3.,  6.,  6.,  9.,  9.],</span>
<span class="go">       [ 0.,  7.,  0.,  7.,  0.,  7.,  0.,  7.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span> <span class="o">=</span> <span class="n">space</span><span class="o">.</span><span class="n">RandomStructure</span><span class="p">(</span><span class="n">boundary</span><span class="o">=</span><span class="n">space</span><span class="o">.</span><span class="n">Sphere</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mf">100.0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span><span class="o">.</span><span class="n">generate_positions</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go"> array([[ 15.7103484 ,   7.56979681, -26.39920966, -81.56024563, -27.30566837],</span>
<span class="go">       [ 62.74380383, -26.29395986,  33.23787658, -16.46650874, -79.4064587 ],</span>
<span class="go">       [  5.66080048, -70.5696085 , -42.68101409, -55.20377865, -24.22675542]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s4</span> <span class="o">=</span> <span class="n">space</span><span class="o">.</span><span class="n">RandomStructure</span><span class="p">(</span><span class="n">boundary</span><span class="o">=</span><span class="n">space</span><span class="o">.</span><span class="n">Cuboid</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s4</span><span class="o">.</span><span class="n">generate_positions</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">array([[ -2.69455996,   9.04858685,  -4.61756624,   4.53035932, -4.80972742],</span>
<span class="go">       [ 12.946409  ,  11.31629902,   5.52137332,   5.49659371, -6.80003331],</span>
<span class="go">       [ -9.36346794, -23.62104418,  -6.2160148 , -15.16040818, -9.66371093]])</span>
</pre></div>
</div>
<p>The positions of individual neurons in a population can be accessed using their <code class="docutils literal"><span class="pre">position</span></code> attribute, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="p">[</span><span class="mi">99</span><span class="p">]</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="p">[</span><span class="mi">99</span><span class="p">]</span><span class="o">.</span><span class="n">position</span>
<span class="go">array([ 0.,  9.,  9.])</span>
</pre></div>
</div>
<p>Positions are always in 3D, and may be given as integers or floating-point values, and as tuples or as numpy arrays.
No specific coordinate system or scale of units is assumed, although many parts of PyNN do assume a Euclidean coordinate system.</p>
<p>To obtain the positions of all neurons at once (as a numpy array), use the <code class="docutils literal"><span class="pre">positions</span></code> attribute of the <code class="docutils literal"><span class="pre">Population</span></code> object, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">positions</span> 
<span class="go">array([[...]])</span>
</pre></div>
</div>
<p>To find the neuron that is closest to a particular point in space, use the <code class="docutils literal"><span class="pre">nearest()</span></code> attribute:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">nearest</span><span class="p">((</span><span class="mf">4.5</span><span class="p">,</span> <span class="mf">7.8</span><span class="p">,</span> <span class="mf">3.3</span><span class="p">))</span>
<span class="go">49</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="p">[</span><span class="n">p1</span><span class="o">.</span><span class="n">id_to_index</span><span class="p">(</span><span class="mi">49</span><span class="p">)]</span><span class="o">.</span><span class="n">position</span>
<span class="go">array([ 4.,  8.,  0.])</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-information-about-a-population">
<h2>Getting information about a <code class="docutils literal"><span class="pre">Population</span></code><a class="headerlink" href="#getting-information-about-a-population" title="Permalink to this headline">¶</a></h2>
<p>A summary of the state of a <code class="docutils literal"><span class="pre">Population</span></code> may be obtained with the <code class="docutils literal"><span class="pre">describe()</span></code> method:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">p4</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span> 
<span class="go">Population &quot;Column 1&quot;</span>
<span class="go">    Structure   : Grid3D</span>
<span class="go">      aspect_ratios: (0.75, 0.59999999999999998)</span>
<span class="go">      fill_order: sequential</span>
<span class="go">      dz: 1.0</span>
<span class="go">      dx: 1.0</span>
<span class="go">      dy: 1.0</span>
<span class="go">      y0: 0.0</span>
<span class="go">      x0: 0.0</span>
<span class="go">      z0: 0</span>
<span class="go">    Local cells : 60</span>
<span class="go">    Cell type   : IF_cond_alpha</span>
<span class="go">    ID range    : 221-280</span>
<span class="go">    First cell on this node:</span>
<span class="go">      ID: 221</span>
<span class="go">      tau_refrac: 1.5</span>
<span class="go">      tau_m: 15.0</span>
<span class="go">      e_rev_E: 0.0</span>
<span class="go">      i_offset: 0.0</span>
<span class="go">      cm: 1.0</span>
<span class="go">      e_rev_I: -70.0</span>
<span class="go">      v_thresh: -55.0</span>
<span class="go">      tau_syn_E: 0.3</span>
<span class="go">      v_rest: -65.0</span>
<span class="go">      tau_syn_I: 0.5</span>
<span class="go">      v_reset: -65.0</span>
</pre></div>
</div>
<p>The output format can be customized by passing a <a class="reference external" href="http://jinja.pocoo.org/">Jinja</a> or <a class="reference external" href="http://www.cheetahtemplate.org/">Cheetah</a> template:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">p4</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s">&quot;Population of {{size}} {{celltype.name}} cells&quot;</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="n">engine</span><span class="o">=</span><span class="s">&#39;jinja2&#39;</span><span class="p">)</span>
<span class="go">Population of 60 IF_cond_alpha cells</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">template</span></code> can be a string or a filename.</p>
</div>
<div class="section" id="connecting-neurons">
<h2>Connecting neurons<a class="headerlink" href="#connecting-neurons" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal"><span class="pre">Projection</span></code> object is a container for all the synaptic connections between neurons in two <code class="docutils literal"><span class="pre">Population</span></code>s (or <code class="docutils literal"><span class="pre">PopulationView``s,</span> <span class="pre">or</span> <span class="pre">``Assembly``s</span> <span class="pre">(see</span> <span class="pre">below)),</span> <span class="pre">together</span> <span class="pre">with</span> <span class="pre">methods</span> <span class="pre">for</span> <span class="pre">setting</span> <span class="pre">synaptic</span> <span class="pre">weights,</span> <span class="pre">delays</span> <span class="pre">and</span> <span class="pre">other</span> <span class="pre">properties.</span>
<span class="pre">A</span> <span class="pre">``Projection</span></code> is created by specifying a pre-synaptic <code class="docutils literal"><span class="pre">Population</span></code>, a post-synaptic <code class="docutils literal"><span class="pre">Population</span></code> and a <code class="docutils literal"><span class="pre">Connector</span></code> object, which determines
the algorithm used to wire up the neurons, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_1</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">AllToAllConnector</span><span class="p">(),</span> <span class="n">target</span><span class="o">=</span><span class="s">&#39;excitatory&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This connects <code class="docutils literal"><span class="pre">p2</span></code> (pre-synaptic) to <code class="docutils literal"><span class="pre">p1</span></code> (post-synaptic) with excitatory synapses, using an &#8216;<code class="docutils literal"><span class="pre">AllToAllConnector</span></code>&#8216; object, which connects every neuron in the pre-synaptic population to every neuron in the post-synaptic population.
The currently available <code class="docutils literal"><span class="pre">Connector</span></code> classes are explained below. It is fairly straightforward for a user to write a new <code class="docutils literal"><span class="pre">Connector</span></code> class if they
wish to use a connection algorithm not already available in PyNN.</p>
<p>Note that the attribute <code class="docutils literal"><span class="pre">synapse_types</span></code> of all standard-cell classes contains a list of the possible values of <code class="docutils literal"><span class="pre">target</span></code> for that cell type.</p>
<div class="section" id="all-to-all-connections">
<h3>All-to-all connections<a class="headerlink" href="#all-to-all-connections" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">AllToAllConnector'</span></code> constructor has one optional argument <code class="docutils literal"><span class="pre">allow_self_connections</span></code>, for use when connecting a <code class="docutils literal"><span class="pre">Population</span></code> to itself.
By default it is <code class="docutils literal"><span class="pre">True</span></code>, but if a neuron should not connect to itself, set it to <code class="docutils literal"><span class="pre">False</span></code>, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prj1_1</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">AllToAllConnector</span><span class="p">(</span><span class="n">allow_self_connections</span><span class="o">=</span><span class="k">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="one-to-one-connections">
<h3>One-to-one connections<a class="headerlink" href="#one-to-one-connections" title="Permalink to this headline">¶</a></h3>
<p>Use of the <code class="docutils literal"><span class="pre">OneToOneConnector</span></code> requires that the pre- and post-synaptic populations have the same size, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prj1_1a</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">OneToOneConnector</span><span class="p">())</span>
</pre></div>
</div>
<p>Trying to connect two <code class="docutils literal"><span class="pre">Population</span></code>s with different sizes will raise an Exception, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">invalid_prj</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">OneToOneConnector</span><span class="p">())</span> 
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
    <span class="n">invalid_prj</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">OneToOneConnector</span><span class="p">())</span>
  File <span class="nb">&quot;/usr/lib/python/site-packages/pyNN/neuron/__init__.py&quot;</span>, line <span class="m">220</span>, in <span class="n">__init__</span>
    <span class="n">method</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
  File <span class="nb">&quot;/usr/lib/python/site-packages/pyNN/connectors.py&quot;</span>, line <span class="m">281</span>, in <span class="n">connect</span>
    <span class="k">raise</span> <span class="n">common</span><span class="o">.</span><span class="n">InvalidDimensionsError</span><span class="p">(</span><span class="s">&quot;OneToOneConnector does not support</span>
               <span class="n">presynaptic</span> <span class="ow">and</span> <span class="n">postsynaptic</span> <span class="n">Populations</span> <span class="n">of</span> <span class="n">different</span> <span class="n">sizes</span><span class="o">.</span><span class="s">&quot;)</span>
<span class="gr">InvalidDimensionsError</span>: <span class="n">OneToOneConnector does not support presynaptic and</span>
<span class="go">                        postsynaptic Populations of different sizes.</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
    <span class="n">invalid_prj</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">OneToOneConnector</span><span class="p">())</span>
  File <span class="nb">&quot;/usr/lib/python/site-packages/pyNN/neuron/__init__.py&quot;</span>, line <span class="m">220</span>, in <span class="n">__init__</span>
    <span class="n">method</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
  File <span class="nb">&quot;/usr/lib/python/site-packages/pyNN/connectors.py&quot;</span>, line <span class="m">281</span>, in <span class="n">connect</span>
    <span class="k">raise</span> <span class="n">common</span><span class="o">.</span><span class="n">InvalidDimensionsError</span><span class="p">(</span><span class="s">&quot;OneToOneConnector does not support</span>
               <span class="n">presynaptic</span> <span class="ow">and</span> <span class="n">postsynaptic</span> <span class="n">Populations</span> <span class="n">of</span> <span class="n">different</span> <span class="n">sizes</span><span class="o">.</span><span class="s">&quot;)</span>
<span class="gr">InvalidDimensionsError</span>: <span class="n">OneToOneConnector does not support presynaptic and</span>
</pre></div>
</div>
</div>
<div class="section" id="connecting-neurons-with-a-fixed-probability">
<h3>Connecting neurons with a fixed probability<a class="headerlink" href="#connecting-neurons-with-a-fixed-probability" title="Permalink to this headline">¶</a></h3>
<p>With the <code class="docutils literal"><span class="pre">FixedProbabilityConnector</span></code> method, each possible connection between all pre-synaptic neurons and all post-synaptic neurons is created with probability <code class="docutils literal"><span class="pre">p_connect</span></code>, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prj3_2</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p3</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">FixedProbabilityConnector</span><span class="p">(</span><span class="n">p_connect</span><span class="o">=</span><span class="mf">0.2</span><span class="p">))</span>
</pre></div>
</div>
<p>The constructor also accepts an <code class="docutils literal"><span class="pre">allow_self_connections</span></code> parameter, as above.</p>
</div>
<div class="section" id="connecting-neurons-with-a-distance-dependent-probability">
<h3>Connecting neurons with a distance-dependent probability<a class="headerlink" href="#connecting-neurons-with-a-distance-dependent-probability" title="Permalink to this headline">¶</a></h3>
<p>For each pair of pre-post cells, the connection probability depends on distance (see above for how to specify neuron positions in space).</p>
<p>The constructor requires a string <code class="docutils literal"><span class="pre">d_expression</span></code>, which should be the right-hand side of a valid Python expression for probability (i.e. returning a value between 0 and 1), involving &#8216;<code class="docutils literal"><span class="pre">d</span></code>&#8216;, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prj1_1b</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">DistanceDependentProbabilityConnector</span><span class="p">(</span><span class="s">&quot;exp(-d)&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_2</span>  <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">DistanceDependentProbabilityConnector</span><span class="p">(</span><span class="s">&quot;d&lt;3&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>The first example connects neurons with an exponentially-decaying probability.
The second example connects each neuron to all its neighbours within a range of 3 units (typically interpreted as µm, but this is up to the individual user). Note that boolean values <code class="docutils literal"><span class="pre">True</span></code> and <code class="docutils literal"><span class="pre">False</span></code> are automatically converted to numerical values <code class="docutils literal"><span class="pre">1.0</span></code> and <code class="docutils literal"><span class="pre">0.0</span></code>.</p>
<p>The calculation of distance may be controlled by specifying a <code class="docutils literal"><span class="pre">Space</span></code> object.</p>
<p>By default, the 3D distance between cell positions is used, but the <code class="docutils literal"><span class="pre">axes</span></code> argument may be used to change this, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">connector</span> <span class="o">=</span> <span class="n">DistanceDependentProbabilityConnector</span><span class="p">(</span><span class="s">&quot;exp(-abs(d))&quot;</span><span class="p">,</span> <span class="n">space</span><span class="o">=</span><span class="n">Space</span><span class="p">(</span><span class="n">axes</span><span class="o">=</span><span class="s">&#39;xy&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>will ignore the z-coordinate when calculating distance.</p>
<p>Similarly, the origins of the coordinate systems of the two <code class="docutils literal"><span class="pre">Population``s</span> <span class="pre">and</span> <span class="pre">the</span> <span class="pre">relative</span> <span class="pre">scale</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">two</span> <span class="pre">coordinate</span> <span class="pre">systems</span> <span class="pre">may</span> <span class="pre">be</span> <span class="pre">controlled</span> <span class="pre">using</span> <span class="pre">the</span> <span class="pre">``offset</span></code> and <code class="docutils literal"><span class="pre">scale_factor</span></code> arguments to the <code class="docutils literal"><span class="pre">Space</span></code> constructor. This is useful when connecting brain regions that have very different sizes but that have a topographic mapping between them, e.g. retina to LGN to V1.</p>
<p>In more abstract models, it is often useful to be able to avoid edge effects by specifying periodic boundary conditions, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">connector</span> <span class="o">=</span> <span class="n">DistanceDependentProbabilityConnector</span><span class="p">(</span><span class="s">&quot;exp(-abs(d))&quot;</span><span class="p">,</span> <span class="n">space</span><span class="o">=</span><span class="n">Space</span><span class="p">(</span><span class="n">periodic_boundaries</span><span class="o">=</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">500</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">500</span><span class="p">),</span> <span class="k">None</span><span class="p">)))</span>
</pre></div>
</div>
<p>calculates distance on the surface of a torus of circumference 500 µm (wrap-around in the x- and y-dimensions but not z).</p>
</div>
<div class="section" id="divergent-fan-out-connections">
<h3>Divergent/fan-out connections<a class="headerlink" href="#divergent-fan-out-connections" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">FixedNumberPostConnector</span></code> connects each pre-synaptic neuron to exactly <code class="docutils literal"><span class="pre">n</span></code> post-synaptic neurons chosen at random:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_1a</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">FixedNumberPostConnector</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>
</pre></div>
</div>
<p>As a refinement to this, the number of post-synaptic neurons can be chosen at random from a <code class="docutils literal"><span class="pre">RandomDistribution</span></code> object, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">distr_npost</span> <span class="o">=</span> <span class="n">RandomDistribution</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s">&#39;binomial&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span><span class="mf">0.3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_1b</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">FixedNumberPostConnector</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">distr_npost</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="convergent-fan-in-connections">
<h3>Convergent/fan-in connections<a class="headerlink" href="#convergent-fan-in-connections" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">FixedNumberPreConnector</span></code> has the same arguments as <code class="docutils literal"><span class="pre">FixedNumberPostConnector</span></code>, but of course it connects each <em>post</em>-synaptic neuron to <code class="docutils literal"><span class="pre">n</span></code> <em>pre</em>-synaptic neurons, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_1c</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">FixedNumberPreConnector</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distr_npre</span> <span class="o">=</span> <span class="n">RandomDistribution</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s">&#39;poisson&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_1d</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">FixedNumberPreConnector</span><span class="p">(</span><span class="n">distr_npre</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-connection-set-algebra">
<h3>Using the Connection Set Algebra<a class="headerlink" href="#using-the-connection-set-algebra" title="Permalink to this headline">¶</a></h3>
<p>The Connection Set Algebra (Djurfeldt, 2010) is a sophisticated system that allows elaborate connectivity patterns to be constructed using a concise syntax. Using the CSA requires the Python <code class="docutils literal"><span class="pre">csa</span></code> module to be installed (see Installation).</p>
<p>The details of constructing a connection set are beyond the scope of this manual. We give here a simple example.</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">csa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cs</span> <span class="o">=</span> <span class="n">csa</span><span class="o">.</span><span class="n">full</span> <span class="o">-</span> <span class="n">csa</span><span class="o">.</span><span class="n">oneToOne</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_1e</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">CSAConnector</span><span class="p">(</span><span class="n">cs</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-and-reading-connection-patterns-to-from-a-file">
<h3>Writing and reading connection patterns to/from a file<a class="headerlink" href="#writing-and-reading-connection-patterns-to-from-a-file" title="Permalink to this headline">¶</a></h3>
<p>Connection patterns can be written to a file using <code class="docutils literal"><span class="pre">saveConnections()</span></code>, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prj1_1a</span><span class="o">.</span><span class="n">saveConnections</span><span class="p">(</span><span class="s">&quot;prj1_1a.conn&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>These files can then be read back in to create a new <code class="docutils literal"><span class="pre">Projection</span></code> object using a <code class="docutils literal"><span class="pre">FromFileConnector</span></code> object, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prj1_1c</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">FromFileConnector</span><span class="p">(</span><span class="s">&quot;prj1_1a.conn&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="specifying-a-list-of-connections">
<h3>Specifying a list of connections<a class="headerlink" href="#specifying-a-list-of-connections" title="Permalink to this headline">¶</a></h3>
<p>Specific connection patterns not covered by the methods above can be obtained by specifying an explicit list of pre-synaptic and post-synaptic neuron indices, with weights and delays.
(Note that the weights and delays should be optional, but currently are not). Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">conn_list</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>  <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
<span class="gp">... </span>  <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
<span class="gp">... </span>  <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
<span class="gp">... </span>  <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj1_2d</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">FromListConnector</span><span class="p">(</span><span class="n">conn_list</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="user-defined-connection-algorithms">
<h3>User-defined connection algorithms<a class="headerlink" href="#user-defined-connection-algorithms" title="Permalink to this headline">¶</a></h3>
<p>If you wish to use a specific connection/wiring algorithm not covered by the PyNN built-in ones, the options include: constructing a list of connections and use the <code class="docutils literal"><span class="pre">FromListConnector</span></code> class; using the CSA (see above); writing your own <code class="docutils literal"><span class="pre">Connector</span></code> class (by looking at the code for the built-in <code class="docutils literal"><span class="pre">Connector</span></code>s, this should be quite straightforward).</p>
</div>
</div>
<div class="section" id="setting-synaptic-weights-and-delays">
<h2>Setting synaptic weights and delays<a class="headerlink" href="#setting-synaptic-weights-and-delays" title="Permalink to this headline">¶</a></h2>
<p>Synaptic weights and delays may be set either when creating the <code class="docutils literal"><span class="pre">Projection</span></code>, as arguments to the <code class="docutils literal"><span class="pre">Connector</span></code> object, or afterwards using the <code class="docutils literal"><span class="pre">setWeights()</span></code> and <code class="docutils literal"><span class="pre">setDelays()</span></code> methods <code class="docutils literal"><span class="pre">Projection</span></code>.</p>
<p>All <code class="docutils literal"><span class="pre">Connector</span></code> objects (except <code class="docutils literal"><span class="pre">CSAConnector</span></code>) accept <code class="docutils literal"><span class="pre">weights</span></code> and <code class="docutils literal"><span class="pre">delays</span></code> arguments to their constructors. Some examples:</p>
<p>To set all weights to the same value:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">connector</span> <span class="o">=</span> <span class="n">AllToAllConnector</span><span class="p">(</span><span class="n">weights</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj1_2e</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">connector</span><span class="p">)</span>
</pre></div>
</div>
<p>To set delays to random values taken from a specific distribution:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">delay_distr</span> <span class="o">=</span> <span class="n">RandomDistribution</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s">&#39;gamma&#39;</span><span class="p">,</span><span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connector</span> <span class="o">=</span> <span class="n">FixedProbabilityConnector</span><span class="p">(</span><span class="n">p_connect</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">delays</span><span class="o">=</span><span class="n">delay_distr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_1e</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">connector</span><span class="p">)</span>
</pre></div>
</div>
<p>To set individual weights and delays to specific values:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">weights</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">1.1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.9</span><span class="o">/</span><span class="n">p1</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">delays</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">weights</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connector</span> <span class="o">=</span> <span class="n">OneToOneConnector</span><span class="p">(</span><span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span> <span class="n">delays</span><span class="o">=</span><span class="n">delays</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj1_1d</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">connector</span><span class="p">)</span>
</pre></div>
</div>
<p>After creating the <code class="docutils literal"><span class="pre">Projection</span></code>, to set the weights of all synaptic connections in a <code class="docutils literal"><span class="pre">Projection</span></code> to a single value, use the <code class="docutils literal"><span class="pre">setWeights()</span></code> method:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prj1_1</span><span class="o">.</span><span class="n">setWeights</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
<p>[Note: synaptic weights in PyNN are in nA for current-based synapses and µS for conductance-based synapses)].</p>
<p>To set different weights to different values, use <code class="docutils literal"><span class="pre">setWeights()</span></code> with a list or 1D numpy array argument, where the length of the list/array is equal to the number of synapses, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">weight_list</span> <span class="o">=</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">numpy</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prj2_1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weight_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_1</span><span class="o">.</span><span class="n">setWeights</span><span class="p">(</span><span class="n">weight_list</span><span class="p">)</span>
</pre></div>
</div>
<p>To set weights to random values, use the <code class="docutils literal"><span class="pre">randomizeWeights()</span></code> method:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">weight_distr</span> <span class="o">=</span> <span class="n">RandomDistribution</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s">&#39;gamma&#39;</span><span class="p">,</span><span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj1_1</span><span class="o">.</span><span class="n">randomizeWeights</span><span class="p">(</span><span class="n">weight_distr</span><span class="p">)</span>
</pre></div>
</div>
<p>Setting delays works similarly:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prj1_1</span><span class="o">.</span><span class="n">setDelays</span><span class="p">(</span><span class="mf">0.6</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">delay_list</span> <span class="o">=</span> <span class="mf">0.3</span><span class="o">*</span><span class="n">numpy</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prj2_1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">delay_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_1</span><span class="o">.</span><span class="n">setDelays</span><span class="p">(</span><span class="n">delay_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">delay_distr</span> <span class="o">=</span> <span class="n">RandomDistribution</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s">&#39;gamma&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">],</span> <span class="n">boundaries</span><span class="o">=</span><span class="p">[</span><span class="n">get_min_delay</span><span class="p">(),</span><span class="mi">1</span><span class="n">e12</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj1_1</span><span class="o">.</span><span class="n">randomizeDelays</span><span class="p">(</span><span class="n">delay_distr</span><span class="p">)</span>
</pre></div>
</div>
<p>It is also possible to access the attributes of individual connections using the
<code class="docutils literal"><span class="pre">connections</span></code> attribute of a projection:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">prj1_1</span><span class="o">.</span><span class="n">connections</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>
<span class="gp">... </span>  <span class="n">c</span><span class="o">.</span><span class="n">weight</span> <span class="o">*=</span> <span class="mi">2</span>
</pre></div>
</div>
<p>In general, though, this is less efficient than using list- or array-based access.</p>
<p>For the <code class="docutils literal"><span class="pre">CSAConnector</span></code>, weights and delays may be specified as part of the connection set - see the <a class="reference external" href="http://software.incf.org/software/csa/">CSA documentation</a> for details.</p>
</div>
<div class="section" id="accessing-weights-and-delays">
<h2>Accessing weights and delays<a class="headerlink" href="#accessing-weights-and-delays" title="Permalink to this headline">¶</a></h2>
<p>To get the weights of all connections in the <code class="docutils literal"><span class="pre">Projection</span></code>, use the <code class="docutils literal"><span class="pre">getWeights()</span></code> method.
Two formats are available. <code class="docutils literal"><span class="pre">'list'</span></code> returns a list of length equal to the number of connections
in the projection, <code class="docutils literal"><span class="pre">'array'</span></code> returns a 2D weight array (with NaN for non-existent
connections):</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_1</span><span class="o">.</span><span class="n">getWeights</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s">&#39;list&#39;</span><span class="p">)[</span><span class="mi">3</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span>
<span class="go">[0.20000000000000001, 0.20000000000000001, 0.10000000000000001, 0.10000000000000001]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_1</span><span class="o">.</span><span class="n">getWeights</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s">&#39;array&#39;</span><span class="p">)[:</span><span class="mi">3</span><span class="p">,:</span><span class="mi">3</span><span class="p">]</span>
<span class="go">array([[ 0.2,  0.2,  0.2],</span>
<span class="go">       [ 0.1,  0.1,  0.1],</span>
<span class="go">       [ 0.1,  0.1,  0.1]])</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">getDelays()</span></code> is analogous. <code class="docutils literal"><span class="pre">printWeights()</span></code> writes the weights to a file.</p>
<p>Access to the weights and delays of individual connections is by the <code class="docutils literal"><span class="pre">connections</span></code> attribute, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_1</span><span class="o">.</span><span class="n">connections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">weight</span>
<span class="go">0.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prj2_1</span><span class="o">.</span><span class="n">connections</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">weight</span>
<span class="go">0.1</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">weightHistogram()</span></code> method returns a histogram of the synaptic weights, with bins
determined by the <code class="docutils literal"><span class="pre">min</span></code>, <code class="docutils literal"><span class="pre">max</span></code> and <code class="docutils literal"><span class="pre">nbins</span></code> arguments passed to the method.</p>
</div>
<div class="section" id="getting-information-about-a-projection">
<h2>Getting information about a <code class="docutils literal"><span class="pre">Projection</span></code><a class="headerlink" href="#getting-information-about-a-projection" title="Permalink to this headline">¶</a></h2>
<p>As for <code class="docutils literal"><span class="pre">Population</span></code>, a summary of the state of a <code class="docutils literal"><span class="pre">Projection</span></code> may be obtained with the <code class="docutils literal"><span class="pre">describe()</span></code> method:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">prj2_1</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="go">Projection &quot;population1→population0&quot; from &quot;population1&quot; (20 cells) to &quot;population0&quot; (100 cells)</span>
<span class="go">Target     : excitatory</span>
<span class="go">Connector  : AllToAllConnector</span>
<span class="go">    allow_self_connections : True</span>
<span class="go">    Weights : 0.0</span>
<span class="go">    Delays : 0.1</span>
<span class="go">Plasticity :</span>
<span class="go">        None</span>
<span class="go">Total connections : 2000</span>
<span class="go">Local connections : 2000</span>
</pre></div>
</div>
</div>
<div class="section" id="synaptic-plasticity">
<h2>Synaptic plasticity<a class="headerlink" href="#synaptic-plasticity" title="Permalink to this headline">¶</a></h2>
<p>So far we have discussed only the case whether the synaptic weight is fixed.
Dynamic synapses (short-term and long-term plasticity) are discussed in the next chapter.</p>
</div>
<div class="section" id="higher-level-structures">
<h2>Higher-level structures<a class="headerlink" href="#higher-level-structures" title="Permalink to this headline">¶</a></h2>
<p>As we noted above, the neurons in a <code class="docutils literal"><span class="pre">Population</span></code> all have the same type. To simplify working with many different populations, individual <code class="docutils literal"><span class="pre">Population</span></code> and <code class="docutils literal"><span class="pre">PopulationView</span></code> objects may be aggregated in an <code class="docutils literal"><span class="pre">Assembly</span></code>, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">assembly</span> <span class="o">=</span> <span class="n">Assembly</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">15</span><span class="p">],</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">)</span>
</pre></div>
</div>
<p>An assembly behaves in many ways like a <code class="docutils literal"><span class="pre">Population</span></code>, e.g. setting and retrieving parameters, specifying which neurons to record from, etc. It can also be specified as the source or target of a <code class="docutils literal"><span class="pre">Projection</span></code>. In this case, all the neurons in the component populations are treated as identical for the purposes of the connection algorithm (note that if the synapse type is specified (with the <code class="docutils literal"><span class="pre">target</span></code> attribute), an Exception will be raised if not all component neuron types possess that synapse type).</p>
<p>You can also create an assembly simply by adding multiple different <code class="docutils literal"><span class="pre">Population</span></code> or <code class="docutils literal"><span class="pre">PopulationView</span></code> objects together:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">another_assembly</span> <span class="o">=</span> <span class="n">p3</span> <span class="o">+</span> <span class="n">p4</span>
</pre></div>
</div>
<p>Individual populations within an Assembly may be accessed via their labels, e.g.</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">assembly</span><span class="o">.</span><span class="n">get_population</span><span class="p">(</span><span class="s">&quot;Input Population&quot;</span><span class="p">)</span>
<span class="go">&lt;pyNN.nest.Population object at 0x4be0250&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembly</span><span class="o">.</span><span class="n">get_population</span><span class="p">(</span><span class="s">&quot;Column 1&quot;</span><span class="p">)</span>
<span class="go">&lt;pyNN.nest.Population object at 0x4be0390&gt;</span>
</pre></div>
</div>
<p>Iterating over an assembly returns individual IDs, ordered by population. Similarly, the <code class="docutils literal"><span class="pre">size</span></code> attribute of an <code class="docutils literal"><span class="pre">Assembly</span></code> gives the total number of neurons it contains. To iterate over or count populations, use the <code class="docutils literal"><span class="pre">populations</span></code> attribute:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">assembly</span><span class="o">.</span><span class="n">populations</span><span class="p">:</span>
<span class="gp">... </span>   <span class="nb">print</span> <span class="n">p</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">celltype</span>
<span class="go">population0 100 IF_curr_alpha</span>
<span class="go">view of population1 with mask slice(10, 15, None) 5 IF_curr_alpha</span>
<span class="go">Input Population 100 SpikeSourceArray</span>
<span class="go">Column 1 60 IF_cond_alpha</span>
</pre></div>
</div>
</div>
<div class="section" id="finishing-up">
<h2>Finishing up<a class="headerlink" href="#finishing-up" title="Permalink to this headline">¶</a></h2>
<p>Just as a simulation must be begun with a call to <code class="docutils literal"><span class="pre">setup()</span></code>, it must be ended with a call to <code class="docutils literal"><span class="pre">end()</span></code>.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>There are several example scripts in the <code class="docutils literal"><span class="pre">examples</span></code> directory of the source distribution.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/pyNN_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Running simulations with PyNN</a><ul>
<li><a class="reference internal" href="#importing-pynn">Importing PyNN</a></li>
<li><a class="reference internal" href="#initialising-the-simulator">Initialising the simulator</a></li>
<li><a class="reference internal" href="#creating-neurons">Creating neurons</a></li>
<li><a class="reference internal" href="#setting-parameter-values">Setting parameter values</a><ul>
<li><a class="reference internal" href="#setting-the-same-value-for-the-entire-population">Setting the same value for the entire population</a></li>
<li><a class="reference internal" href="#setting-the-parameters-of-individual-neurons">Setting the parameters of individual neurons</a></li>
<li><a class="reference internal" href="#setting-the-parameters-of-a-subset-of-neurons">Setting the parameters of a subset of neurons</a></li>
<li><a class="reference internal" href="#setting-random-values">Setting random values</a></li>
<li><a class="reference internal" href="#setting-values-according-to-an-array">Setting values according to an array</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-initial-values">Setting initial values</a></li>
<li><a class="reference internal" href="#iterating-over-all-the-neurons-in-a-population">Iterating over all the neurons in a population</a></li>
<li><a class="reference internal" href="#injecting-current">Injecting current</a></li>
<li><a class="reference internal" href="#recording">Recording</a></li>
<li><a class="reference internal" href="#running-a-simulation">Running a simulation</a></li>
<li><a class="reference internal" href="#accessing-recorded-data-and-writing-to-file">Accessing recorded data and writing to file</a><ul>
<li><a class="reference internal" href="#statistics-of-recorded-data">Statistics of recorded data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#repeating-a-simulation">Repeating a simulation</a></li>
<li><a class="reference internal" href="#position-in-space">Position in space</a></li>
<li><a class="reference internal" href="#getting-information-about-a-population">Getting information about a <code class="docutils literal"><span class="pre">Population</span></code></a></li>
<li><a class="reference internal" href="#connecting-neurons">Connecting neurons</a><ul>
<li><a class="reference internal" href="#all-to-all-connections">All-to-all connections</a></li>
<li><a class="reference internal" href="#one-to-one-connections">One-to-one connections</a></li>
<li><a class="reference internal" href="#connecting-neurons-with-a-fixed-probability">Connecting neurons with a fixed probability</a></li>
<li><a class="reference internal" href="#connecting-neurons-with-a-distance-dependent-probability">Connecting neurons with a distance-dependent probability</a></li>
<li><a class="reference internal" href="#divergent-fan-out-connections">Divergent/fan-out connections</a></li>
<li><a class="reference internal" href="#convergent-fan-in-connections">Convergent/fan-in connections</a></li>
<li><a class="reference internal" href="#using-the-connection-set-algebra">Using the Connection Set Algebra</a></li>
<li><a class="reference internal" href="#writing-and-reading-connection-patterns-to-from-a-file">Writing and reading connection patterns to/from a file</a></li>
<li><a class="reference internal" href="#specifying-a-list-of-connections">Specifying a list of connections</a></li>
<li><a class="reference internal" href="#user-defined-connection-algorithms">User-defined connection algorithms</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-synaptic-weights-and-delays">Setting synaptic weights and delays</a></li>
<li><a class="reference internal" href="#accessing-weights-and-delays">Accessing weights and delays</a></li>
<li><a class="reference internal" href="#getting-information-about-a-projection">Getting information about a <code class="docutils literal"><span class="pre">Projection</span></code></a></li>
<li><a class="reference internal" href="#synaptic-plasticity">Synaptic plasticity</a></li>
<li><a class="reference internal" href="#higher-level-structures">Higher-level structures</a></li>
<li><a class="reference internal" href="#finishing-up">Finishing up</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Download and Install</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="standardmodels.html"
                        title="next chapter">Standardised neuron models</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/highlevelapi.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="standardmodels.html" title="Standardised neuron models"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Download and Install"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyNN 0.7 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2006-2017, the PyNN community.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.3.
    </div>
  </body>
</html>